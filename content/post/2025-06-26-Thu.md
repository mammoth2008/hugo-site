---
title: "免费 AI 代理 Gemini-CLI 的自动退出问题 250626 Thu"
date: 2025-06-26 08:00:00+08:00
lastmod: 2025-06-26 08:00:00+08:00
draft: false
math: true
keywords: [想法, 读书, 生活]
description: ""
tags: [想法, 生活, 笔记]
categories: [想法]
author: "猛犸"
---

# 免费 AI 代理 Gemini-CLI 的自动退出问题

对于开发者和熟练的计算机使用者，命令行界面（CLI）是核心工作环境。Google 称其为[“家”](https://blog.google/technology/developers/introducing-gemini-cli-open-source-ai-agent/)；现在，Google 给家里加了个 AI：Gemini-CLI。

![CleanShot 2025-06-26 at 14.25.20](https://1-1256632535.cos.ap-beijing.myqcloud.com/img/CleanShot%202025-06-26%20at%2014.25.20.png)

关注 AI 进展的读者们应该知道，OpenAI 的 [Codex CLI](https://help.openai.com/en/articles/11096431-openai-codex-cli-getting-started)、Anthropic 的 [Claude Code](https://www.anthropic.com/claude-code) 和 Microsoft 的 [Azure AI CLI](https://github.com/Azure/azure-ai-cli) 也都是终端 AI；Github 上还有一大把开源产品。

但是，Gemini-CLI 它免费啊：每分钟60 次请求，每天1000 次请求，对个人来说相当够用。

除了这一让人无法忽视的优点外，Gemini-CLI 和其他终端 AI 的区别还有：

- 使用 Gemini 2.5 Pro 模型；
- 上下文窗口高达100万 tokens；
- 支持多模态和 Web 搜索；
- 内置 MCP；

Gemini-CLI 是个 Agent，采用[“推理与行动”（ReAct）](https://developers.google.com/gemini-code-assist/docs/gemini-cli)模型。当接到任务时，它会先推理，将任务分解为一系列执行步骤，然后会展示这个计划并请求确认，在获得同意后才开始执行。

这种工作方式使其能够处理复杂的、多步骤的任务。它能理解代码库、根据需求编写功能，[从草图生成应用框架](https://github.com/google-gemini/gemini-cli)，甚至干脆生成一段视频。

![CleanShot 2025-06-26 at 14.27.55](https://1-1256632535.cos.ap-beijing.myqcloud.com/img/CleanShot%202025-06-26%20at%2014.27.55.png)

听起来不错，不过在使用过程中，我遇到了一个问题：Gemini-CLI 会在运行几十秒后无提示地退出。我排查了常见问题，又翻了一下 [GitHub 中的问题列表](https://github.com/google-gemini/gemini-cli/issues) ，才发现这是个（对无法直接访问 Google 地区的用户来说）普遍现象。

原因是 Gemini-CLI 会尝试向 Google 服务器发送遥测数据，这会绕过用户设置的代理，而该请求失败会导致程序崩溃。

所以解决方案也就很简单，禁用遥测功能即可。可以改一下配置文件。Github 用户 [MarkShawn2020](https://github.com/MarkShawn2020) [用 Claude 解决了这个问题](https://github.com/google-gemini/gemini-cli/issues/1425#issuecomment-3005831312)。

1. 找到或创建 `~/.gemini/settings.json` 文件。
2. 写入以下内容：

```
{
  "telemetry": {
    "enabled": false,
    "logPrompts": false
  },
  "usageStatisticsEnabled": false
}
```

